#
# Description: Install script for VirtualBox
#
# Author: Andy Roper <andyroper42@gmail.com>
# URL: https://github.com/andy-roper/roperdot
#

if [[ "$ROPERDOT_DESKTOP_ENV" = windows ]]; then
	choco install -y --ignore-pending-reboot $choco_user_option virtualbox

	zip_file="${ROPERDOT_DIR}/install-profiles/personal/config-files/VirtualBox.zip"
	if [[ -f "$zip_file" ]]; then
		. "${ROPERDOT_DIR}/source-scripts/unpack"
		. "${ROPERDOT_DIR}/source-scripts/win-env-functions"
		winenv USERPROFILE
		dest_dir="$USERPROFILE/.VirtualBox"
		mkdir -p "$dest_dir"
		cd "$dest_dir"
		unpack_overwrite "$zip_file"
	fi
fi